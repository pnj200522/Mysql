## VIEW DELETE 불가 상황

# VIEW 생성 시 GROUP 함수 사용.
CREATE OR REPLACE VIEW CV_DML_TEST1
AS
SELECT DEPARTMENT_ID DID, SUM(SALARY) SU_SAL
FROM EMPLOYEES
WHERE DEPARTMENT_ID IS NOT NULL
GROUP BY DEPARTMENT_ID
ORDER BY 1;

DELETE CV_DML_TEST1
WHERE DID < 50;
--SQL 오류: ORA-01732: data manipulation operation not legal on this view
 
 # VIEW 생성 시 DISTINCT 사용
CREATE OR REPLACE VIEW CV_DML_TEST2
AS
SELECT DISTINCT DEPARTMENT_ID, JOB_ID
FROM EMPLOYEES
WHERE DEPARTMENT_ID IS NOT NULL
ORDER BY 1,2;

DELETE CV_DML_TEST2 WHERE DEPARTMENT_ID <50;
--SQL 오류: ORA-01732: data manipulation operation not legal on this view
 
 #  VIEW 생성 시 ROWNUM 사용
CREATE OR REPLACE VIEW CV_DML_TEST3
AS
SELECT ROWNUM RANK, IV.EID, IV.HIDATE
FROM (SELECT ROWNUM, EMPLOYEE_ID EID, HIRE_DATE HIDATE  FROM EMPLOYEES  ORDER BY 3 DESC) IV;

DELETE CV_DML_TEST3 WHERE HIDATE < TO_DATE('2007/03/24','YYYY/MM/DD'); 
--SQL 오류: ORA-01732: data manipulation operation not legal on this view
